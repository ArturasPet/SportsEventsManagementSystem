@model SportBook.ViewModels.TournamentData
@{
    ViewData["Title"] = "Tournament";
    Layout = "~/Views/Shared/_EsportsLayout.cshtml";
}
<link rel="stylesheet" href="~/lib/font-awesome/css/all.min.css" />
<div class="d-flex flex-row">
    <h1 class="p-2">@Html.DisplayFor(model => model.Tournament.Name)</h1>

    <a class="btn btn-primary ml-auto p-2" data-toggle="modal" data-target="#myModal">Register</a>
    <form asp-action="Tournament">
        <div class="modal" id="myModal">
            <div class="modal-dialog">
                <div class="modal-content">

                    <!-- Modal Header -->
                    <div class="modal-header">
                        <h4 class="modal-title">Modal Heading</h4>
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                    </div>

                    <!-- Modal body -->
                    <div class="modal-body">
                        <div class="form-group">
                            <label asp-for="TournamentMember.FkTeam" class="control-label"></label>
                            <select asp-for="TournamentMember.FkTeam" class="form-control" asp-items="Model.Teams"></select>
                        </div>
                    </div>
                    <input type="hidden" asp-for="TournamentMember.FkTournament" value="@Model.Tournament.TournamentId" />
                    <input type="hidden" asp-for="TournamentMember.TournamentMemberId" />
                    <!-- Modal footer -->
                    <div class="modal-footer">
                        <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
                        <div class="form-group">
                            <input type="submit" value="Create" class="btn btn-secondary" />
                            <a style="margin-left:5px" onclick="location.href='@Url.Action("Tournament", "Esports")'" class="btn btn-secondary"><i class="fa fa-list"></i></a>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </form>
</div>
<h3>@Html.DisplayFor(model => model.Tournament.Description)</h3>

<h4>@Html.DisplayFor(model => model.Tournament.StartTime)</h4>

@if (Model.Tournament.TournamentMember.Count < 2)
{
    <h2 class="text-danger">
        Brackets not ready! Atleast 2 teams need to register!
    </h2>
}
else
{
    <iframe src="@Model.Tournament.TournamentUrl/module" style="width:100%" height="500" frameborder="0" scrolling="auto" allowtransparency="true"></iframe>
}




@section Scripts {
    <script>
        $('.iframe').challonge('single_elim', { subdomain: '', theme: '1', multiplier: '1.0', match_width_multiplier: '1.0', show_final_results: '0', show_standings: '0' });
    </script>
}